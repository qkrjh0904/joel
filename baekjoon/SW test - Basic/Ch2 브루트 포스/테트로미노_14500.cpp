#include <iostream>

using namespace std;

int a[500][500];
int main(){
	int n, m;
	cin>>n>>m;
	for(int i=0; i<n; ++i){
		for(int j=0; j<m; ++j){
			cin>>a[i][j];
		}
	}
	
	int tetro[19][3][2] = {
	{{0, 1},{0, 2},{0, 3}},	
	{{1, 0},{2, 0},{3, 0}},
	{{0, 1},{1, 0},{1, 1}},	
	{{1, 0},{2, 0},{2, -1}},
	{{1, 0},{2, 0},{2, 1}},	
	{{1, 0},{0, 1},{0, 2}},
	{{0, 1},{0, 2},{1, 2}},	
	{{1, 0},{1, -1},{1, -2}},
	{{1, 0},{1, 1},{1, 2}}, 
	{{0, 1},{1, 1},{2, 1}},
	{{0, 1},{1, 0},{2, 0}}, 
	{{1, 0},{1, 1},{2, 1}}, 
	{{1, 0},{1, -1},{2, -1}}, 
	{{0, 1},{1, 1},{1, 2}},
	{{0, 1},{1, 0},{1, -1}}, 
	{{1, -1},{1, 0},{1, 1}},
	{{0, 1},{0, 2},{1, 1}}, 
	{{1, 0},{2, 0},{1, -1}},
	{{1, 0},{1, 1},{2, 0}}
	};
	
	int max=0;
	for(int i=0; i<n; ++i){
		for(int j=0; j<m; ++j){
			for(int k=0; k<19; ++k){
				int x1 = tetro[k][0][0] + i;
				int y1 = tetro[k][0][1] + j;
				int x2 = tetro[k][1][0] + i;
				int y2 = tetro[k][1][1] + j;
				int x3 = tetro[k][2][0] + i;
				int y3 = tetro[k][2][1] + j;
				
				if( x1>=n || x1<0 || x2>=n || x2<0 || x3>=n || x3<0 )
					continue;
				if( y1>=m || y1<0 || y2>=m || y2<0 || y3>=m || y3<0 )
					continue;
					
				int temp = a[i][j] + a[x1][y1] + a[x2][y2] + a[x3][y3];
				if( max < temp )
					max = temp;
				
			}
		}
	}
	cout<<max<<endl;
	
	
	return 0;
}
